{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from 'flatpickr';\n// Додатковий імпорт стилів\nimport 'flatpickr/dist/flatpickr.min.css';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst buttonStart = document.querySelector('[data-start]');\nconst daysData = document.querySelector('[data-days]');\nconst hoursData = document.querySelector('[data-hours]');\nconst minutesData = document.querySelector('[data-minutes]');\nconst secondsData = document.querySelector('[data-seconds]');\n\nconst datatimeInput = document.querySelector('#datetime-picker');\n\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose([selectedDates]) {\n    if (selectedDates < options.defaultDate) {\n      buttonStart.setAttribute('disabled', '');\n      iziToast.show({\n        message: 'Please choose a date in the future',\n        backgroundColor: 'rgb(236, 56, 56)',\n        messageColor: '#FFF',\n        position: 'center',\n      });\n    } else {\n      buttonStart.removeAttribute('disabled');\n      userSelectedDate = selectedDates.getTime();\n    }\n  },\n};\n\nflatpickr(datatimeInput, options);\n\nbuttonStart.addEventListener('click', handlerBtnStart);\n\nfunction handlerBtnStart() {\n  if (userSelectedDate > Date.now()) {\n    const timerCalc = () => {\n      outputsUpdate(\n        [daysData, hoursData, minutesData, secondsData],\n        convertMs(userSelectedDate - Date.now())\n      );\n      if (\n        userSelectedDate - 1000 < Date.now() &&\n        secondsData.textContent === '00'\n      )\n        clearInterval(interval);\n    };\n    timerCalc();\n    const interval = setInterval(timerCalc, 1000);\n    buttonStart.setAttribute('disabled', '');\n    datatimeInput.setAttribute('disabled', '');\n    buttonStart.dataset.start = 'started';\n  } else {\n    iziToast.show({\n      message: 'Please choose a date in the future',\n      backgroundColor: 'rgb(236, 56, 56)',\n      messageColor: '#FFF',\n      position: 'center',\n    });\n    buttonStart.setAttribute('disabled', '');\n  }\n}\n\nconst outputUpdate = (output, time) => {\n  output.textContent = time.toString().padStart(2, '0');\n};\nconst outputsUpdate = (\n  [daysData, hoursData, minutesData, secondsData],\n  { days, hours, minutes, seconds }\n) => {\n  outputUpdate(daysData, days);\n  outputUpdate(hoursData, hours);\n  outputUpdate(minutesData, minutes);\n  outputUpdate(secondsData, seconds);\n};\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n"],"names":["buttonStart","daysData","hoursData","minutesData","secondsData","datatimeInput","userSelectedDate","options","selectedDates","iziToast","flatpickr","handlerBtnStart","timerCalc","outputsUpdate","convertMs","interval","outputUpdate","output","time","days","hours","minutes","seconds","ms"],"mappings":"2FASA,MAAMA,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAErDC,EAAgB,SAAS,cAAc,kBAAkB,EAE/D,IAAIC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQ,CAACC,CAAa,EAAG,CACnBA,EAAgBD,EAAQ,aAC1BP,EAAY,aAAa,WAAY,EAAE,EACvCS,EAAS,KAAK,CACZ,QAAS,qCACT,gBAAiB,mBACjB,aAAc,OACd,SAAU,QAClB,CAAO,IAEDT,EAAY,gBAAgB,UAAU,EACtCM,EAAmBE,EAAc,UAEpC,CACH,EAEAE,EAAUL,EAAeE,CAAO,EAEhCP,EAAY,iBAAiB,QAASW,CAAe,EAErD,SAASA,GAAkB,CACzB,GAAIL,EAAmB,KAAK,MAAO,CACjC,MAAMM,EAAY,IAAM,CACtBC,EACE,CAACZ,EAAUC,EAAWC,EAAaC,CAAW,EAC9CU,EAAUR,EAAmB,KAAK,KAAK,CAC/C,EAEQA,EAAmB,IAAO,KAAK,IAAK,GACpCF,EAAY,cAAgB,MAE5B,cAAcW,CAAQ,CAC9B,EACIH,IACA,MAAMG,EAAW,YAAYH,EAAW,GAAI,EAC5CZ,EAAY,aAAa,WAAY,EAAE,EACvCK,EAAc,aAAa,WAAY,EAAE,EACzCL,EAAY,QAAQ,MAAQ,SAChC,MACIS,EAAS,KAAK,CACZ,QAAS,qCACT,gBAAiB,mBACjB,aAAc,OACd,SAAU,QAChB,CAAK,EACDT,EAAY,aAAa,WAAY,EAAE,CAE3C,CAEA,MAAMgB,EAAe,CAACC,EAAQC,IAAS,CACrCD,EAAO,YAAcC,EAAK,SAAU,EAAC,SAAS,EAAG,GAAG,CACtD,EACML,EAAgB,CACpB,CAACZ,EAAUC,EAAWC,EAAaC,CAAW,EAC9C,CAAE,KAAAe,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,IAC9B,CACHN,EAAaf,EAAUkB,CAAI,EAC3BH,EAAad,EAAWkB,CAAK,EAC7BJ,EAAab,EAAakB,CAAO,EACjCL,EAAaZ,EAAakB,CAAO,CACnC,EAEA,SAASR,EAAUS,EAAI,CAQrB,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAE1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EAEpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EAEjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,QAAQ,IAAIR,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}